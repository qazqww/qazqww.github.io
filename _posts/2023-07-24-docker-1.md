---
layout: post
title: "Docker - 01. 시작하기"
categories: docker
---

## Docker란?

도커는 컨테이너 기술이다 : 컨테이너를 생성하고 관리하기 위한 도구

- 컨테이너란?

**표준화된 소프트웨어 유닛**\
코드 모음과 그 코드를 실행하는데 필요한 종속성 도구들 (실행 환경)\
동일한 환경에서 동일한 애플리케이션을 실행할 수 있게끔 한다\
(식기와 먹을거리를 담은 피크닉 박스와 비슷한 느낌)\

🦜 어플뿐 아니라 실행환경을 통으로 설치할 수 있게 해주는 느낌

- 왜 필요한가?

똑같은 개발 환경을 쉽게 유지할 수 있음 (버전 문제를 겪지 않음)\
ㄴ배포 시, 협업 시, 다수의 프로젝트에서 서로 다른 버전을 사용하는 경우 등

- 그냥 가상 머신을 사용하면 안되나?

가상 머신도 동일한 기능을 수행할 수 있지만\
오버헤드 발생 (특히 Virtual OS가 많을수록.. 추가 설치 비용, 시스템 자원 낭비 등)\
프로덕션 단계에선 프로덕션 머신 위에 버츄얼 머신이 또 올라가기 때문에 낭비가 심해짐\
공유하는 것도 까다로운 편

- 도커의 운용 방식

호스트 운영체제가 기본적으로 내재(Built-in)하고 있거나, 컨테이너 에뮬레이팅을 지원하는 내장 컨테이너를 활용하여 운영체제 위에서 도커 엔진을 실행\
호스트 운영체제의 리소스와 커널을 공유하여 컨테이너를 실행\
컨테이너를 이미지로 만들어 공유할 수 있음

🦜 윈도우의 경우엔 Hyper-V (서버 가상화?) 및 WSL 기술을 사용하는 것 같다

- 도커의 장점 정리
1. 운영체제와 시스템에 미치는 영향이 적다
2. 공유, 재구축, 배포를 쉽게 할 수 있다
3. 필요한 환경만 골라 캡슐화할 수 있다
<br><br>

---

- Docker Tools

Docker Engine : 도커를 실행하는데 필요한 Linux를 호스팅하는 가상 머신에 설정\
Docker Desktop : 데몬 프로세스 포함 - 도커의 작동 여부 확인\
Docker Hub : 클라우드, 웹에서 이미지를 호스팅하여 외부에 공유\
Docker Compose : 더 복잡한 컨테이너, 다중 컨테이너 프로젝트를 더 쉽게 관리

※ Kubernetes : 복잡하게 컨테이너화된 애플리케이션을 배포 관리에 도움되는 툴

- Dockerfile

도커에게 최종적으로 컨테이너를 설정하는 방법을 설명

```docker
# NodeJS를 기본 이미지로 사용
FROM node:14

# 컨테이너 파일 시스템의 작업 디렉토리
WORKDIR /app

# 해당 파일을 작업 디렉토리에 복사
COPY package.json .

# 명령 실행하여 종속성 설치
RUN npm install

# 나머지 코드를 작업 디렉토리에 복사
COPY . .

# 포트 3000을 외부에 노출
EXPOSE 3000

# node 명령으로 앱 실행
CMD [ "node", "app.mjs" ]
```

`docker build .` : Dockerfile 이미지를 빌드\
성공적으로 빌드 시 이미지 결과물에 대한 ID를 얻는다

`docker run [이미지 ID]` : 이미지를 기반으로 컨테이너 실행\
-p : 실행하려는 컨테이너에 해당 포트를 게시(publish)하여 컨테이너의 포트를 엶

`docker ps` : 실행 중인 모든 컨테이너 나열

`docker stop [컨테이너 이름]` : 해당 컨테이너 종료